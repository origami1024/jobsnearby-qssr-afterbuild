(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{0:function(t,s){},"03de":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"uploads"},["company"===t.user.role&&!0===t.user.isagency?e("div",{staticClass:"authed uploads__inner"},[e("h4",{staticClass:"uploads__header"},[t._v(t._s(t.$t("upl.header")))]),e("q-stepper",{ref:"stepper",staticStyle:{paddingLeft:"0"},attrs:{color:"primary",animated:""},model:{value:t.step,callback:function(s){t.step=s},expression:"step"}},[e("q-step",{attrs:{name:1,title:t.$t("upl.stepAdd"),icon:"settings",done:t.step>1}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          "+t._s(t.$t("upl.chooseFile"))+" "),e("a",{staticStyle:{color:"var(--violet-btn-color)"},attrs:{href:"/statics/vac.xlsx"}},[t._v(t._s(t.$t("upl.fileExample")))])]),e("q-input",{ref:"fileUploader",staticStyle:{"max-width":"250px"},attrs:{outlined:"",dense:"",type:"file",hint:".xls и .xlsx файлы",accept:".xls, .xlsx",name:"fileUploader",id:"fileUploader"},on:{change:t.parseFile}})],1),e("q-step",{attrs:{name:2,title:t.$t("upl.stepPublish"),icon:"create_new_folder",done:t.step>2}},[e("div",[e("table",{staticStyle:{"border-spacing":"0"}},[e("thead",{style:{backgroundColor:"black",color:"white"}},[e("td",[t._v(t._s(t.$t("upl.tdTilte")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdSalMin")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdSalMax")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdCurr")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdAgeFrom")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdAgeTo")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdTimeFrom")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdTimeTo")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdSchedule")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdLangs")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdEdu")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdExp")))]),e("td",[t._v(t._s(t.$t("upl.tdCity")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdJTyp")))]),e("td",[t._v(t._s(t.$t("upl.tdMore")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdTel")))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdMail")))])]),t._l(t.parsed,(function(s,a){return e("tr",{key:a,attrs:{itemindex:a},on:{input:t.onEditableInput}},[e("td",{attrs:{contenteditable:"true",propname:"title"}},[t._v(t._s(s.title))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"salary_min"}},[t._v(t._s(s.salary_min))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"salary_max"}},[t._v(t._s(s.salary_max))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"currency"}},[t._v(t._s(s.currency))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"age1"}},[t._v(t._s(s.age1))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"age2"}},[t._v(t._s(s.age2))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"worktime1"}},[t._v(t._s(s.worktime1))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"worktime2"}},[t._v(t._s(s.worktime2))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"schedule"}},[t._v(t._s(s.schedule))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"langs"}},[t._v(t._s(s.langs))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"edu"}},[t._v(t._s(s.edu))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"experience"}},[t._v(t._s(s.experience))]),e("td",{attrs:{contenteditable:"true",propname:"city"}},[t._v(t._s(s.city))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"jtype"}},[t._v(t._s(s.jtype))]),e("td",{attrs:{contenteditable:"true",propname:"description"}},[t._v(t._s(s.description))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"contact_tel"}},[t._v(t._s(s.contact_tel))]),e("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"contact_mail"}},[t._v(t._s(s.contact_mail))])])}))],2),t.step>1?e("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:t.$t("upl.reset")},on:{click:t.resetParsed}}):t._e(),e("q-btn",{attrs:{color:"primary",disabled:t.parsed.length<1,label:t.$t("upl.publish")},on:{click:t.sendNewJobs}})],1)]),e("q-step",{attrs:{name:3,title:t.$t("upl.stepFinish"),icon:"done",done:t.step>3}},[e("p",[t._v(t._s(t.uploadStatus))]),e("q-btn",{attrs:{color:"primary",disabled:t.step.length<3,label:t.$t("upl.addMore")},on:{click:function(s){t.step=1}}})],1)],1),e("h4",{staticClass:"uploads__header"},[t._v(t._s(t.$t("upl.allPublishedHeader"))+"("+t._s(t.user.ownJobs.length)+")")]),e("div",{staticClass:"uploads__published"},[e("JobsStats")],1)],1):"company"!=t.user.role?e("div",[t._v("\n    "+t._s(t.$t("upl.authPlsMsg"))+"\n  ")]):!1===t.user.isagency?e("div",[t._v("\n    "+t._s(t.$t("upl.onlyAgency"))+"\n  ")]):t._e()])},o=[],i=(e("8e6e"),e("8a81"),e("ac6a"),e("cadf"),e("06db"),e("456d"),e("a481"),e("28a5"),e("34ef"),e("c47a")),n=e.n(i),l=e("1146"),r=e.n(l),c=e("2f62"),d=e("27bd");function p(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,a)}return e}function u(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?p(Object(e),!0).forEach((function(s){n()(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}var _={name:"uploads",data:function(){return{step:1,file:void 0,parsed:[],uploadStatus:this.$t("upl.readyToUpload")}},computed:u({},Object(c["b"])(["user",["role","ownJobs","isagency"]])),mounted:function(){this.$store.dispatch("getOwnJobs")},methods:{onEditableInput:function(t){var s=t.target.parentElement.getAttribute("itemindex"),e=t.target.getAttribute("propname"),a=t.target.textContent;console.log("t ",t.target.getAttribute("propname")),console.log("t1 ",t.target.textContent),console.log("t2 ",t.target.parentElement.getAttribute("itemindex")),this.parsed[s][e]=a},resetParsed:function(){this.parsed=[],this.step=1},sendNewJobs:function(){var t=this;this.parsed.length>0?(this.uploadStatus="Идет загрузка...",this.$axios.post("/entrance",this.parsed,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then((function(s){"OK"===s.data?(t.uploadStatus=t.$t("upl.success1"),t.$q.notify(t.$t("upl.success1")),t.$store.dispatch("getOwnJobs")):(s.data&&s.data&&"error limits reached"==s.data.msg?(t.uploadStatus=t.$t("upl.errLimits1")+s.data.added+t.$t("upl.errLimits2")+s.data.total,s.data.added>0&&t.$store.dispatch("getOwnJobs")):t.uploadStatus=t.$t("upl.err1"),console.log(s.data))})),this.parsed=[],this.step=3):this.uploadStatus=this.$t("upl.getData")},parseFile:function(t){this.files=t.target.files;var s=new FileReader,e=this;s.onload=function(t){var s=new Uint8Array(t.target.result),a=r.a.read(s,{type:"array"}),o=a.Sheets[a.SheetNames[0]],i=o["!ref"].split(":");function n(t){return t==e.$t("upl.perm")?"c":t==e.$t("upl.temp")?"v":""}i=Math.min(i[i.length-1].replace(/\D/g,""),15);var l=["title","salary_min","salary_max","currency","contact_tel","contact_mail","description","age1","age2","worktime1","worktime2","schedule","edu","experience","city"],c=i;i=0;var d=[],p="abcdefghijklmnopqrstuvwxyz".toUpperCase().split(""),u=0,_=function(t){p[u]+i in o&&(d[i][t]=o[p[u]+i].v),u+=1};while(i<=c)u=0,d.push({}),l.forEach((function(t){return _(t)})),console.log(p[u]+i in o&&""!=n(o[p[u]+i].v)),p[u]+i in o&&""!=n(o[p[u]+i].v)&&(d[i].jtype=n(o[p[u]+i].v)),u+=1,d[i].langs=[],p[u]+i in o&&d[i].langs.push(o[p[u]+i].v),u+=1,p[u]+i in o&&d[i].langs.push(o[p[u]+i].v),u+=1,p[u]+i in o&&d[i].langs.push(o[p[u]+i].v),u+=1,i++;console.log(d),d.shift(),d.shift(),e.parsed=d,e.step=2},s.readAsArrayBuffer(this.files[0])}},components:{JobsStats:d["a"]}},b=_,h=(e("885e"),e("7f62"),e("2877")),w=e("eebe"),m=e.n(w),v=e("f531"),f=e("87fe"),y=e("27f9"),g=e("9c40"),$=Object(h["a"])(b,a,o,!1,null,"8116b46e",null);s["default"]=$.exports;m()($,"components",{QStepper:v["a"],QStep:f["a"],QInput:y["a"],QBtn:g["a"]})},"15d0":function(t,s,e){"use strict";var a=e("5374"),o=e.n(a);o.a},"1b2e":function(t,s,e){},2:function(t,s){},"27bd":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"jobsstats"},[e("div",[e("table",[e("thead",[e("tr",[e("td",{staticStyle:{width:"22%","min-width":"22%","max-width":"22%","text-align":"left"}},[t._v(t._s(t.$t("jobsStats.title")))]),e("td",{staticClass:"noshow-below550",staticStyle:{width:"6%","min-width":"6%","max-width":"6%"}},[t._v(t._s(t.$t("jobsStats.views")))]),e("td",{staticClass:"noshow-below550",staticStyle:{width:"6%","min-width":"6%","max-width":"6%"}},[t._v(t._s(t.$t("jobsStats.uniqViews")))]),e("td",{staticStyle:{width:"42%","min-width":"42%","max-width":"42%"}},[t._v("\n            "+t._s(t.$t("jobsStats.status"))+"\n          ")]),e("td",{staticClass:"noshow-below550",staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.change")))]),e("td",{staticClass:"control-td displaytc-only550",staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.change")[0]))]),e("td",{staticClass:"noshow-below550",staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.close")))]),e("td",{staticClass:"control-td displaytc-only550",staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.close")[0]))]),e("td",{staticClass:"noshow-below550",staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.delete")))]),e("td",{staticClass:"control-td displaytc-only550",staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.delete")[0]))])])]),t._l(t.jobslist,(function(s){return e("tr",{key:s.job_id,staticClass:"jobstat"},[e("td",{staticStyle:{"text-align":"left"}},[e("a",{staticClass:"link1",attrs:{target:"_blank",href:"/jobpage?id="+s.job_id}},[t._v(t._s(s.title))])]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(Number(s.hits_all)))]),e("td",{staticClass:"noshow-below550"},[t._v(t._s(s.hits_uniq))]),e("td",{staticClass:"fs15"},[t._v("\n          "+t._s(!0===s.is_published&&!1===s.is_closed?t.$t("jobsStats.published"):!0===s.is_published&&!0===s.is_closed?t.$t("jobsStats.closedByUser"):!1===s.is_published&&!1===s.is_closed?t.$t("jobsStats.awaitsAdmin"):null!==s.closed_why&&s.closed_why.length>0?t.$t("jobsStats.closedByAdmin")+': "'+s.closed_why+'"':t.$t("jobsStats.closedByAdmin"))+"\n        ")]),e("td",{staticClass:"control-td"},[s.is_closed?1==s.is_published&&1==s.is_closed?e("q-btn",{staticClass:"controlbtn",attrs:{icon:"work",size:"sm",color:"blue",glossy:""},on:{click:function(e){return t.$store.dispatch("reopenJobById",s.job_id)}}},[e("q-tooltip",[e("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.reopenHint")))])])],1):0==s.is_published&&1==s.is_closed?e("q-btn",{staticClass:"controlbtn",attrs:{icon:"build",size:"sm",color:"purple",glossy:""},on:{click:function(e){return t.$store.dispatch("reopenJobById",s.job_id)}}},[e("q-tooltip",[e("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.resendHint")))])])],1):t._e():e("q-btn",{staticClass:"controlbtn",attrs:{icon:"edit",size:"sm",color:"green",glossy:""},on:{click:function(e){return t.editJob(s.job_id)}}},[e("q-tooltip",[e("p",{staticClass:"fs15",staticStyle:{margin:"0"}},[t._v(t._s(t.$t("jobsStats.editHint")))])])],1)],1),e("td",{staticClass:"control-td"},[s.is_closed?e("span",[t._v("\n            "+t._s(t.$t("jobsStats.closed"))+"\n          ")]):e("q-btn",{staticClass:"controlbtn",attrs:{icon:"work_off",size:"sm",color:"orange",glossy:""},on:{click:function(e){return t.$store.dispatch("closeJobById",{jid:s.job_id,notifier:t.$q.notify})}}},[e("q-tooltip",[e("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.closeHint")))])])],1)],1),e("td",{staticClass:"control-td"},[e("q-btn",{staticClass:"controlbtn",attrs:{icon:"delete_forever",size:"sm",color:"red",glossy:""},on:{click:function(e){return t.$store.dispatch("deleteJobById",{jid:s.job_id,notifier:t.$q.notify})}}},[e("q-tooltip",[e("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.deleteHint")))])])],1)],1)])}))],2),0==t.jobslist.length?e("p",[t._v(t._s(t.$t("jobsStats.none")))]):t._e()])])},o=[],i=(e("7514"),e("f751"),{name:"JobsStats",computed:{jobslist:function(){return this.$store.state.user.ownJobs}},methods:{editJob:function(t){this.$store.dispatch("setAJNewJobsPageType","edit");var s,e=Object.assign({},this.jobslist.find((function(s){return s.job_id==t}))),a=this.$t("App.jcats"),o=this.$t("App.jtypeOptions"),i=this.$t("App.expOpts"),n=this.$t("App.curOpts");s=a.find((function(t){return t.value==e.jcategory})),s||(s=a[0]),e.jcategory=s,s=n.find((function(t){return t.value==e.currency})),s||(s=n[0]),e.currency=s,s=i.find((function(t){return t.value==e.experience})),s||(s=i[0]),e.experience=s,s=o.find((function(t){return t.value==e.jtype})),s||(s=o[0]),e.jtype=s,null==e.contact_mail&&(e.contact_mail=""),null==e.contact_tel&&(e.contact_tel=""),this.$store.dispatch("setAJEditedObj",e),this.$router.push("/addJob")}}}),n=i,l=(e("15d0"),e("2877")),r=e("eebe"),c=e.n(r),d=e("9c40"),p=e("05c0"),u=Object(l["a"])(n,a,o,!1,null,"2ecd36d0",null);s["a"]=u.exports;c()(u,"components",{QBtn:d["a"],QTooltip:p["a"]})},3:function(t,s){},5374:function(t,s,e){},"7f62":function(t,s,e){"use strict";var a=e("a5b9"),o=e.n(a);o.a},"885e":function(t,s,e){"use strict";var a=e("1b2e"),o=e.n(a);o.a},a5b9:function(t,s,e){}}]);