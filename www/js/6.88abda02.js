(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{0:function(t,e){},"03de":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"uploads"},["company"===t.user.role?s("div",{staticClass:"authed"},[s("h4",{staticClass:"uploads__header"},[t._v(t._s(t.$t("upl.header")))]),s("q-stepper",{ref:"stepper",staticStyle:{paddingLeft:"0"},attrs:{color:"primary",animated:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("q-step",{attrs:{name:1,title:t.$t("upl.stepAdd"),icon:"settings",done:t.step>1}},[t._v("\n        "+t._s(t.$t("upl.chooseFile"))+" "),s("a",{attrs:{href:"/statics/vac.xlsx"}},[t._v(t._s(t.$t("upl.fileExample")))]),s("q-input",{ref:"fileUploader",staticStyle:{"max-width":"250px"},attrs:{outlined:"",dense:"",type:"file",hint:".xls и .xlsx файлы",accept:".xls, .xlsx",name:"fileUploader",id:"fileUploader"},on:{change:t.parseFile}})],1),s("q-step",{attrs:{name:2,title:t.$t("upl.stepPublish"),icon:"create_new_folder",done:t.step>2}},[s("div",[s("table",{staticStyle:{"border-spacing":"0"}},[s("thead",{style:{backgroundColor:"black",color:"white"}},[s("td",[t._v(t._s(t.$t("upl.tdTilte")))]),s("td",[t._v(t._s(t.$t("upl.tdSalMin")))]),s("td",[t._v(t._s(t.$t("upl.tdSalMax")))]),s("td",[t._v(t._s(t.$t("upl.tdCurr")))]),s("td",[t._v(t._s(t.$t("upl.tdAgeFrom")))]),s("td",[t._v(t._s(t.$t("upl.tdAgeTo")))]),s("td",[t._v(t._s(t.$t("upl.tdTimeFrom")))]),s("td",[t._v(t._s(t.$t("upl.tdTimeTo")))]),s("td",[t._v(t._s(t.$t("upl.tdSchedule")))]),s("td",[t._v(t._s(t.$t("upl.tdLangs")))]),s("td",[t._v(t._s(t.$t("upl.tdEdu")))]),s("td",[t._v(t._s(t.$t("upl.tdExp")))]),s("td",[t._v(t._s(t.$t("upl.tdCity")))]),s("td",[t._v(t._s(t.$t("upl.tdJTyp")))]),s("td",[t._v(t._s(t.$t("upl.tdMore")))]),s("td",[t._v(t._s(t.$t("upl.tdTel")))]),s("td",[t._v(t._s(t.$t("upl.tdMail")))])]),t._l(t.parsed,(function(e,a){return s("tr",{key:a,attrs:{itemindex:a},on:{input:t.onEditableInput}},[s("td",{attrs:{contenteditable:"true",propname:"title"}},[t._v(t._s(e.title))]),s("td",{attrs:{contenteditable:"true",propname:"salary_min"}},[t._v(t._s(e.salary_min))]),s("td",{attrs:{contenteditable:"true",propname:"salary_max"}},[t._v(t._s(e.salary_max))]),s("td",{attrs:{contenteditable:"true",propname:"currency"}},[t._v(t._s(e.currency))]),s("td",{attrs:{contenteditable:"true",propname:"age1"}},[t._v(t._s(e.age1))]),s("td",{attrs:{contenteditable:"true",propname:"age2"}},[t._v(t._s(e.age2))]),s("td",{attrs:{contenteditable:"true",propname:"worktime1"}},[t._v(t._s(e.worktime1))]),s("td",{attrs:{contenteditable:"true",propname:"worktime2"}},[t._v(t._s(e.worktime2))]),s("td",{attrs:{contenteditable:"true",propname:"schedule"}},[t._v(t._s(e.schedule))]),s("td",{attrs:{contenteditable:"true",propname:"langs"}},[t._v(t._s(e.langs))]),s("td",{attrs:{contenteditable:"true",propname:"edu"}},[t._v(t._s(e.edu))]),s("td",{attrs:{contenteditable:"true",propname:"experience"}},[t._v(t._s(e.experience))]),s("td",{attrs:{contenteditable:"true",propname:"city"}},[t._v(t._s(e.city))]),s("td",{attrs:{contenteditable:"true",propname:"jtype"}},[t._v(t._s(e.jtype))]),s("td",{attrs:{contenteditable:"true",propname:"description"}},[t._v(t._s(e.description))]),s("td",{attrs:{contenteditable:"true",propname:"contact_tel"}},[t._v(t._s(e.contact_tel))]),s("td",{attrs:{contenteditable:"true",propname:"contact_mail"}},[t._v(t._s(e.contact_mail))])])}))],2),t.step>1?s("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:t.$t("upl.reset")},on:{click:t.resetParsed}}):t._e(),s("q-btn",{attrs:{color:"primary",disabled:t.parsed.length<1,label:t.$t("upl.publish")},on:{click:t.sendNewJobs}})],1)]),s("q-step",{attrs:{name:3,title:t.$t("upl.stepFinish"),icon:"done",done:t.step>3}},[s("p",[t._v(t._s(t.uploadStatus))]),s("q-btn",{attrs:{color:"primary",disabled:t.step.length<3,label:t.$t("upl.addMore")},on:{click:function(e){t.step=1}}})],1)],1),s("h4",{staticClass:"uploads__header"},[t._v(t._s(t.$t("upl.allPublishedHeader"))+"("+t._s(t.user.ownJobs.length)+")")]),s("div",{staticClass:"uploads__published"},[s("JobsStats")],1)],1):s("div",[t._v("\n    "+t._s(t.$t("upl.authPlsMsg"))+"\n  ")])])},n=[],i=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a481"),s("28a5"),s("34ef"),s("c47a")),o=s.n(i),r=s("1146"),l=s.n(r),d=s("2f62"),c=s("27bd");function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(Object(s),!0).forEach((function(e){o()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _={name:"uploads",data:function(){return{step:1,file:void 0,parsed:[],uploadStatus:this.$t("upl.readyToUpload")}},computed:u({},Object(d["b"])(["user",["role","ownJobs"]])),mounted:function(){this.$store.dispatch("getOwnJobs")},methods:{onEditableInput:function(t){var e=t.target.parentElement.getAttribute("itemindex"),s=t.target.getAttribute("propname"),a=t.target.textContent;console.log("t ",t.target.getAttribute("propname")),console.log("t1 ",t.target.textContent),console.log("t2 ",t.target.parentElement.getAttribute("itemindex")),this.parsed[e][s]=a},resetParsed:function(){this.parsed=[],this.step=1},sendNewJobs:function(){var t=this;this.parsed.length>0?(this.uploadStatus="Идет загрузка...",this.$axios.post("/entrance",this.parsed,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then((function(e){"OK"===e.data?(t.uploadStatus=t.$t("upl.success1"),t.$q.notify(t.$t("upl.success1")),t.$store.dispatch("getOwnJobs")):(e.data&&e.data&&"error limits reached"==e.data.msg?(t.uploadStatus=t.$t("upl.errLimits1")+e.data.added+t.$t("upl.errLimits2")+e.data.total,e.data.added>0&&t.$store.dispatch("getOwnJobs")):t.uploadStatus=t.$t("upl.err1"),console.log(e.data))})),this.parsed=[],this.step=3):this.uploadStatus=this.$t("upl.getData")},parseFile:function(t){this.files=t.target.files;var e=new FileReader,s=this;e.onload=function(t){var e=new Uint8Array(t.target.result),a=l.a.read(e,{type:"array"}),n=a.Sheets[a.SheetNames[0]],i=n["!ref"].split(":");function o(t){return t==s.$t("upl.perm")?"c":t==s.$t("upl.temp")?"v":""}i=Math.min(i[i.length-1].replace(/\D/g,""),15);var r=["title","salary_min","salary_max","currency","contact_tel","contact_mail","description","age1","age2","worktime1","worktime2","schedule","edu","experience","city"],d=i;i=0;var c=[],p="abcdefghijklmnopqrstuvwxyz".toUpperCase().split(""),u=0,_=function(t){p[u]+i in n&&(c[i][t]=n[p[u]+i].v),u+=1};while(i<=d)u=0,c.push({}),r.forEach((function(t){return _(t)})),console.log(p[u]+i in n&&""!=o(n[p[u]+i].v)),p[u]+i in n&&""!=o(n[p[u]+i].v)&&(c[i].jtype=o(n[p[u]+i].v)),u+=1,c[i].langs=[],p[u]+i in n&&c[i].langs.push(n[p[u]+i].v),u+=1,p[u]+i in n&&c[i].langs.push(n[p[u]+i].v),u+=1,p[u]+i in n&&c[i].langs.push(n[p[u]+i].v),u+=1,i++;console.log(c),c.shift(),c.shift(),s.parsed=c,s.step=2},e.readAsArrayBuffer(this.files[0])}},components:{JobsStats:c["a"]}},b=_,h=(s("123c"),s("2877")),m=s("eebe"),f=s.n(m),v=s("f531"),y=s("87fe"),g=s("27f9"),$=s("9c40"),w=Object(h["a"])(b,a,n,!1,null,"dd646b44",null);e["default"]=w.exports;f()(w,"components",{QStepper:v["a"],QStep:y["a"],QInput:g["a"],QBtn:$["a"]})},"123c":function(t,e,s){"use strict";var a=s("8056"),n=s.n(a);n.a},2:function(t,e){},"27bd":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jobsstats"},[s("div",[s("table",[s("thead",[s("tr",[s("td",{staticStyle:{width:"22%","min-width":"22%","max-width":"22%","text-align":"left"}},[t._v(t._s(t.$t("jobsStats.title")))]),s("td",{staticStyle:{width:"6%","min-width":"6%","max-width":"6%"}},[t._v(t._s(t.$t("jobsStats.views")))]),s("td",{staticStyle:{width:"6%","min-width":"6%","max-width":"6%"}},[t._v(t._s(t.$t("jobsStats.uniqViews")))]),s("td",{staticStyle:{width:"42%","min-width":"42%","max-width":"42%"}},[t._v("\n            "+t._s(t.$t("jobsStats.status"))+"\n          ")]),s("td",{staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.change")))]),s("td",{staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.close")))]),s("td",{staticStyle:{width:"8%","min-width":"8%","max-width":"8%"}},[t._v(t._s(t.$t("jobsStats.delete")))])])]),t._l(t.jobslist,(function(e){return s("tr",{key:e.job_id,staticClass:"jobstat"},[s("td",{staticStyle:{"text-align":"left"}},[s("a",{staticClass:"link1",attrs:{target:"_blank",href:"/jobpage?id="+e.job_id}},[t._v(t._s(e.title))])]),s("td",[t._v(t._s(Number(e.hits_all)))]),s("td",[t._v(t._s(e.hits_uniq))]),s("td",{staticStyle:{"font-size":"15px"}},[t._v("\n          "+t._s(!0===e.is_published&&!1===e.is_closed?t.$t("jobsStats.published"):!0===e.is_published&&!0===e.is_closed?t.$t("jobsStats.closedByUser"):!1===e.is_published&&!1===e.is_closed?t.$t("jobsStats.awaitsAdmin"):null!==e.closed_why&&e.closed_why.length>0?t.$t("jobsStats.closedByAdmin")+': "'+e.closed_why+'"':t.$t("jobsStats.closedByAdmin"))+"\n        ")]),s("td",[e.is_closed?1==e.is_published&&1==e.is_closed?s("q-btn",{attrs:{icon:"work",size:"sm",color:"blue",glossy:""},on:{click:function(s){return t.$store.dispatch("reopenJobById",e.job_id)}}},[s("q-tooltip",[s("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.reopenHint")))])])],1):0==e.is_published&&1==e.is_closed?s("q-btn",{attrs:{icon:"build",size:"sm",color:"purple",glossy:""},on:{click:function(s){return t.$store.dispatch("reopenJobById",e.job_id)}}},[s("q-tooltip",[s("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.resendHint")))])])],1):t._e():s("q-btn",{attrs:{icon:"edit",size:"sm",color:"green",glossy:""},on:{click:function(s){return t.editJob(e.job_id)}}},[s("q-tooltip",[s("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.editHint")))])])],1)],1),s("td",[e.is_closed?s("span",[t._v("\n            "+t._s(t.$t("jobsStats.closed"))+"\n          ")]):s("q-btn",{attrs:{icon:"work_off",size:"sm",color:"orange",glossy:""},on:{click:function(s){return t.$store.dispatch("closeJobById",{jid:e.job_id,notifier:t.$q.notify})}}},[s("q-tooltip",[s("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.closeHint")))])])],1)],1),s("td",[s("q-btn",{attrs:{icon:"delete_forever",size:"sm",color:"red",glossy:""},on:{click:function(s){return t.$store.dispatch("deleteJobById",{jid:e.job_id,notifier:t.$q.notify})}}},[s("q-tooltip",[s("p",{staticStyle:{"font-size":"15px",margin:"0"}},[t._v(t._s(t.$t("jobsStats.deleteHint")))])])],1)],1)])}))],2),0==t.jobslist.length?s("p",[t._v(t._s(t.$t("jobsStats.none")))]):t._e()])])},n=[],i=(s("7514"),s("f751"),{name:"JobsStats",computed:{jobslist:function(){return this.$store.state.user.ownJobs}},methods:{editJob:function(t){this.$store.dispatch("setAJNewJobsPageType","edit");var e,s=Object.assign({},this.jobslist.find((function(e){return e.job_id==t}))),a=this.$t("App.jcats"),n=this.$t("App.jtypeOptions"),i=this.$t("App.expOpts"),o=this.$t("App.curOpts");e=a.find((function(t){return t.value==s.jcategory})),e||(e=a[0]),s.jcategory=e,e=o.find((function(t){return t.value==s.currency})),e||(e=o[0]),s.currency=e,e=i.find((function(t){return t.value==s.experience})),e||(e=i[0]),s.experience=e,e=n.find((function(t){return t.value==s.jtype})),e||(e=n[0]),s.jtype=e,null==s.contact_mail&&(s.contact_mail=""),null==s.contact_tel&&(s.contact_tel=""),this.$store.dispatch("setAJEditedObj",s),this.$router.push("/addJob")}}}),o=i,r=(s("6c30"),s("2877")),l=s("eebe"),d=s.n(l),c=s("9c40"),p=s("05c0"),u=Object(r["a"])(o,a,n,!1,null,"25309729",null);e["a"]=u.exports;d()(u,"components",{QBtn:c["a"],QTooltip:p["a"]})},3:function(t,e){},"6c30":function(t,e,s){"use strict";var a=s("7fa5"),n=s.n(a);n.a},"7fa5":function(t,e,s){},8056:function(t,e,s){}}]);