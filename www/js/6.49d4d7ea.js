(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{0:function(t,e){},"03de":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"uploads"},["company"===t.user.role&&!0===t.user.isagency?s("div",{staticClass:"authed uploads__inner"},[s("h4",{staticClass:"uploads__header"},[t._v(t._s(t.$t("upl.header")))]),s("q-stepper",{ref:"stepper",staticStyle:{paddingLeft:"0"},attrs:{color:"primary",animated:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("q-step",{attrs:{name:1,title:t.$t("upl.stepAdd"),icon:"settings",done:t.step>1}},[s("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          "+t._s(t.$t("upl.chooseFile"))+" "),s("a",{staticStyle:{color:"var(--violet-btn-color)"},attrs:{href:"/statics/vac.xlsx"}},[t._v(t._s(t.$t("upl.fileExample")))])]),s("q-input",{ref:"fileUploader",staticStyle:{"max-width":"250px"},attrs:{outlined:"",dense:"",type:"file",hint:".xls и .xlsx файлы",accept:".xls, .xlsx",name:"fileUploader",id:"fileUploader"},on:{change:t.parseFile}})],1),s("q-step",{attrs:{name:2,title:t.$t("upl.stepPublish"),icon:"create_new_folder",done:t.step>2}},[s("div",[s("table",{staticStyle:{"border-spacing":"0","margin-bottom":"15px"}},[s("thead",[s("tr",{staticStyle:{"background-color":"black",color:"white"}},[s("td",[t._v(t._s(t.$t("upl.tdTilte")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdSalMin")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdSalMax")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdCurr")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdAgeFrom")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdAgeTo")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdTimeFrom")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdTimeTo")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdSchedule")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdLangs")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdEdu")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdExp")))]),s("td",[t._v(t._s(t.$t("upl.tdCity")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdJTyp")))]),s("td",[t._v(t._s(t.$t("upl.tdMore")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdTel")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdMail")))]),s("td",{staticClass:"noshow-below550"},[t._v(t._s(t.$t("upl.tdJCategory")))])])]),t._l(t.parsed,(function(e,a){return s("tr",{key:a,attrs:{itemindex:a},on:{input:t.onEditableInput}},[s("td",{attrs:{contenteditable:"true",propname:"title"}},[t._v(t._s(e.title))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"salary_min"}},[t._v(t._s(e.salary_min))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"salary_max"}},[t._v(t._s(e.salary_max))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"currency"}},[t._v(t._s(e.currency))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"age1"}},[t._v(t._s(e.age1))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"age2"}},[t._v(t._s(e.age2))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"worktime1"}},[t._v(t._s(e.worktime1))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"worktime2"}},[t._v(t._s(e.worktime2))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"schedule"}},[t._v(t._s(e.schedule))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"langs"}},[t._v(t._s(e.langs))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"edu"}},[t._v(t._s(e.edu))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"experience"}},[t._v(t._s(e.experience))]),s("td",{attrs:{contenteditable:"true",propname:"city"}},[t._v(t._s(e.city))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"jtype"}},[t._v(t._s(e.jtype))]),s("td",{attrs:{contenteditable:"true",propname:"description"}},[t._v(t._s(e.description))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"contact_tel"}},[t._v(t._s(e.contact_tel))]),s("td",{staticClass:"noshow-below550",attrs:{contenteditable:"true",propname:"contact_mail"}},[t._v(t._s(e.contact_mail))]),s("td",{staticClass:"noshow-below550",attrs:{propname:"jcategory"}},[t._v(t._s(e.jcategory))])])}))],2),t.step>1?s("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:t.$t("upl.reset")},on:{click:t.resetParsed}}):t._e(),s("q-btn",{attrs:{color:"primary",disabled:t.parsed.length<1,label:t.$t("upl.publish")},on:{click:t.sendNewJobs}})],1)]),s("q-step",{attrs:{name:3,title:t.$t("upl.stepFinish"),icon:"done",done:t.step>3}},[s("p",[t._v(t._s(t.uploadStatus))]),s("q-btn",{attrs:{color:"primary",disabled:t.step.length<3,label:t.$t("upl.addMore")},on:{click:function(e){t.step=1}}})],1)],1),s("h4",{staticClass:"uploads__header"},[t._v(t._s(t.$t("upl.allPublishedHeader"))+" ("+t._s(t.user.ownJobs.length)+")")]),s("div",{staticClass:"uploads__published"},[s("JobsStats")],1)],1):"company"!=t.user.role?s("div",[t._v("\n    "+t._s(t.$t("upl.authPlsMsg"))+"\n  ")]):!1===t.user.isagency?s("div",[t._v("\n    "+t._s(t.$t("upl.onlyAgency"))+"\n  ")]):t._e()])},o=[],r=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a481"),s("28a5"),s("34ef"),s("9523")),n=s.n(r),l=s("1146"),i=s.n(l),d=s("2f62"),p=s("27bd");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){n()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var b={name:"uploads",data:function(){return{step:1,file:void 0,parsed:[],uploadStatus:this.$t("upl.readyToUpload")}},computed:u({},Object(d["b"])(["user",["role","ownJobs","isagency"]])),mounted:function(){this.$store.dispatch("getOwnJobs")},methods:{onEditableInput:function(t){var e=t.target.parentElement.getAttribute("itemindex"),s=t.target.getAttribute("propname"),a=t.target.textContent;this.parsed[e][s]=a},resetParsed:function(){this.parsed=[],this.step=1},transformJCats:function(){var t={"Не имеет значения":0,"Бух учет, финансы":19,"Гос служба":1,"Дизайн, полиграфия":14,"ИТ, Интернет":4,"Красота, фитнес, спорт":12,"Логистика, склад":10,"Маркетинг, реклама":13,"Медицина, Фармация, Ветеринария":9,"Недвижимость, риэлтерские услуги":3,"Нефть и Газ":5,"Образование, репетиторство":6,"Производство, агропром":7,"Рестораны, питание":8,"Строительство":11,"Торговля":2,"Транспорт, автосервис":15,"Туризм, гостиницы":16,"Юриспруденция":17,"HR, кадры":18};this.parsed=this.parsed.map((function(e){return e.jcategory=t[e.jcategory],e}))},sendNewJobs:function(){var t=this;this.parsed.length>0?(this.transformJCats(),this.uploadStatus="Идет загрузка...",this.$emit("scrollTo",0),this.$axios.post("/entrance",this.parsed,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then((function(e){"OK"===e.data?(t.uploadStatus=t.$t("upl.success1"),t.$q.notify(t.$t("upl.success1")),t.$store.dispatch("getOwnJobs")):(e.data&&e.data&&"error limits reached"==e.data.msg?(t.uploadStatus=t.$t("upl.errLimits1")+e.data.added+t.$t("upl.errLimits2")+e.data.total,e.data.added>0&&t.$store.dispatch("getOwnJobs")):t.uploadStatus=t.$t("upl.err1"),console.log(e.data))})),this.parsed=[],this.step=3):this.uploadStatus=this.$t("upl.getData")},parseFile:function(t){this.files=t.target.files;var e=new FileReader,s=this;e.onload=function(t){var e=new Uint8Array(t.target.result),a=i.a.read(e,{type:"array"}),o=a.Sheets[a.SheetNames[0]],r=o["!ref"].split(":");function n(t){return t==s.$t("upl.perm")?"c":t==s.$t("upl.temp")?"v":""}r=Math.min(r[r.length-1].replace(/\D/g,""),32);var l=["title","salary_min","salary_max","currency","contact_tel","contact_mail","description","age1","age2","worktime1","worktime2","schedule","edu","experience","city","jcategory"],d=r;r=0;var p=[],c="abcdefghijklmnopqrstuvwxyz".toUpperCase().split(""),u=0,b=function(t){c[u]+r in o&&(p[r][t]=o[c[u]+r].v),u+=1};while(r<=d)u=0,p.push({}),l.forEach(b),console.log(c[u]+r in o&&""!=n(o[c[u]+r].v)),c[u]+r in o&&""!=n(o[c[u]+r].v)&&(p[r].jtype=n(o[c[u]+r].v)),u+=1,p[r].langs=[],c[u]+r in o&&p[r].langs.push(o[c[u]+r].v),u+=1,c[u]+r in o&&p[r].langs.push(o[c[u]+r].v),u+=1,c[u]+r in o&&p[r].langs.push(o[c[u]+r].v),u+=1,r++;p.shift(),p.shift(),p=p.filter((function(t){return t.title})),console.log(p),s.parsed=p,s.step=2},e.readAsArrayBuffer(this.files[0])}},components:{JobsStats:p["a"]}},_=b,h=(s("bcf5"),s("7f62"),s("2877")),m=s("f531"),w=s("87fe"),v=s("27f9"),f=s("9c40"),g=s("eebe"),y=s.n(g),x=Object(h["a"])(_,a,o,!1,null,"5418dcda",null);e["default"]=x.exports;y()(x,"components",{QStepper:m["a"],QStep:w["a"],QInput:v["a"],QBtn:f["a"]})},2:function(t,e){},3:function(t,e){},"7f62":function(t,e,s){"use strict";var a=s("db61"),o=s.n(a);o.a},bcf5:function(t,e,s){"use strict";var a=s("d01a"),o=s.n(a);o.a},d01a:function(t,e,s){var a=s("efb3");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=s("499e").default;o("81e39cc0",a,!0,{sourceMap:!1})},db61:function(t,e,s){var a=s("ffc2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=s("499e").default;o("5ba8f312",a,!0,{sourceMap:!1})},efb3:function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,".uploads[data-v-5418dcda]{max-width:1280px;margin-bottom:20px!important}.uploads__header[data-v-5418dcda]{margin-top:16px;margin-bottom:8px;font-size:15px;font-weight:600}.uploads__published[data-v-5418dcda]{padding:10px;background:var(--menubg-color);border:0.5px solid #c2c2c6;box-sizing:border-box;border-radius:10px;box-shadow:0px 5px 15px rgba(0,0,0,0.1)}@media screen and (max-width:550px){.uploads[data-v-5418dcda]{padding:0 20px}}.uploads table[data-v-5418dcda]{border-collapse:collapse}.uploads tr[data-v-5418dcda]:nth-child(odd){background-color:#eee}.uploads .authed[data-v-5418dcda]{margin:10px 0}.uploads .q-stepper[data-v-5418dcda]{background:var(--menubg-color);border:0.5px solid #c2c2c6;box-sizing:border-box;border-radius:10px;box-shadow:0px 5px 15px rgba(0,0,0,0.1)}",""]),t.exports=e},ffc2:function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,"@media screen and (max-width:550px){.uploads .q-stepper div.q-stepper__step-inner{padding:10px!important}}",""]),t.exports=e}}]);